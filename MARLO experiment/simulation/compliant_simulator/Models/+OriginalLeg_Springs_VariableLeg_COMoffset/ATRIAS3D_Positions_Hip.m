function [pcm, p0, p0T, pHR, p1R, p2R, p3R, p4R, pHL, p1L, p2L, p3L, p4L] = ATRIAS3D_Positions_Hip(q, extra_vars) %#codegen
	% Generated by writeOptimizedFunctions (13 Oct 2016 17:39:38)

	xT = q(1);
	yT = q(2);
	zT = q(3);
	qzT = q(4);
	qyT = q(5);
	qxT = q(6);
	q1R = q(7);
	q2R = q(8);
	q1L = q(9);
	q2L = q(10);
	qgr1R = q(11);
	qgr2R = q(12);
	q3R = q(13);
	qgr1L = q(14);
	qgr2L = q(15);
	q3L = q(16);
	leg_length = extra_vars(1);
	torso_com_offset_x = extra_vars(2);
	torso_com_offset_y = extra_vars(3);
	torso_com_offset_z = extra_vars(4);

	pcm = zeros(3,1);
	t1 = cos(qzT);
	t2 = sin(qyT);
	t3 = t1*t2;
	t4 = sin(qxT);
	t5 = t3*t4;
	t7 = cos(qyT);
	t8 = t1*t7;
	t9 = cos(q3R);
	t12 = sin(q3R);
	t13 = t8*t12;
	t15 = cos(q3L);
	t18 = sin(q3L);
	t19 = t18*t8;
	t21 = sin(qzT);
	t22 = cos(qxT);
	t23 = t21*t22;
	t25 = -t23+t5;
	t26 = -0.179999999999999995e-2+torso_com_offset_y;
	t31 = t21*t4+t3*t22;
	t32 = 0.402399999999999980e0+torso_com_offset_z;
	t37 = t31*t9;
	t39 = cos(q1R);
	t42 = 0.1120309233738270e-3*t5+0.5731161176002540e-1*t8*t9+0.1519139320949094e-2*t13-0.5731161176002540e-1*t8*t15-0.1519139320949094e-2*t19-0.1120309233738270e-3*t23+0.3751566060716043e0*t25*t26+0.3751566060716043e0*t31*t32-0.5731161176002540e-1*t31*t12+0.1519139320949094e-2*t37+0.3398172114871207e-3*t25*t39;
	t43 = t13+t37;
	t44 = sin(q1R);
	t51 = cos(qgr1R);
	t54 = sin(qgr1R);
	t61 = cos(q2R);
	t64 = sin(q2R);
	t71 = cos(qgr2R);
	t74 = 0.3398172114871207e-3*t43*t44+0.7476565615762858e-2*t43*t39-0.7476565615762858e-2*t25*t44+0.1953462608228318e-2*t25*t51+0.1953462608228318e-2*t43*t54+0.1942475754413761e-2*t43*t51-0.1942475754413761e-2*t25*t54-0.1911894034835472e-3*t25*t61-0.1911894034835472e-3*t43*t64+0.7126706962557625e-2*t43*t61-0.7126706962557625e-2*t25*t64-0.1921208562644173e-2*t25*t71;
	t76 = sin(qgr2R);
	t85 = t31*t15;
	t87 = cos(q1L);
	t90 = -t19+t85;
	t91 = sin(q1L);
	t98 = cos(qgr1L);
	t101 = sin(qgr1L);
	t104 = -0.1921208562644173e-2*t43*t76+0.1929872411855646e-2*t43*t71-0.1929872411855646e-2*t25*t76-0.5731161176002540e-1*t31*t18+0.1519139320949094e-2*t85+0.3398172114871207e-3*t25*t87+0.3398172114871207e-3*t90*t91+0.7476565615762858e-2*t90*t87-0.7476565615762858e-2*t25*t91+0.1953462608228318e-2*t25*t98+0.1953462608228318e-2*t90*t101;
	t109 = cos(q2L);
	t112 = sin(q2L);
	t119 = cos(qgr2L);
	t122 = sin(qgr2L);
	t132 = 0.1942475754413761e-2*t90*t98-0.1942475754413761e-2*t25*t101-0.1911894034835472e-3*t25*t109-0.1911894034835472e-3*t90*t112+0.7126706962557625e-2*t90*t109-0.7126706962557625e-2*t25*t112-0.1921208562644173e-2*t25*t119-0.1921208562644173e-2*t90*t122+0.1929872411855646e-2*t90*t119-0.1929872411855646e-2*t25*t122+0.9999999999999999e0*xT+0.3751566060716043e0*t8*torso_com_offset_x;
	t135 = t21*t7;
	t138 = t1*t22;
	t140 = t21*t2;
	t141 = t140*t4;
	t142 = t138+t141;
	t147 = -t1*t4+t140*t22;
	t152 = t147*t9;
	t156 = t135*t12;
	t157 = t156+t152;
	t166 = -0.5731161176002540e-1*t135*t15+0.1120309233738270e-3*t138+0.3751566060716043e0*t142*t26+0.3751566060716043e0*t147*t32-0.5731161176002540e-1*t147*t12+0.1519139320949094e-2*t152+0.3398172114871207e-3*t142*t39+0.3398172114871207e-3*t157*t44+0.7476565615762858e-2*t157*t39-0.7476565615762858e-2*t142*t44+0.1953462608228318e-2*t142*t51;
	t191 = 0.1953462608228318e-2*t157*t54+0.1942475754413761e-2*t157*t51-0.1942475754413761e-2*t142*t54-0.1911894034835472e-3*t142*t61-0.1911894034835472e-3*t157*t64+0.7126706962557625e-2*t157*t61-0.7126706962557625e-2*t142*t64-0.1921208562644173e-2*t142*t71-0.1921208562644173e-2*t157*t76+0.1929872411855646e-2*t157*t71-0.1929872411855646e-2*t142*t76-0.5731161176002540e-1*t147*t18;
	t193 = t147*t15;
	t197 = t135*t18;
	t198 = -t197+t193;
	t217 = 0.1519139320949094e-2*t193+0.3398172114871207e-3*t142*t87+0.3398172114871207e-3*t198*t91+0.7476565615762858e-2*t198*t87-0.7476565615762858e-2*t142*t91+0.1953462608228318e-2*t142*t98+0.1953462608228318e-2*t198*t101+0.1942475754413761e-2*t198*t98-0.1942475754413761e-2*t142*t101-0.1911894034835472e-3*t142*t109-0.1911894034835472e-3*t198*t112;
	t238 = 0.7126706962557625e-2*t198*t109-0.7126706962557625e-2*t142*t112-0.1921208562644173e-2*t142*t119-0.1921208562644173e-2*t198*t122+0.1929872411855646e-2*t198*t119-0.1929872411855646e-2*t142*t122+0.9999999999999999e0*yT+0.1120309233738270e-3*t141+0.5731161176002540e-1*t135*t9+0.1519139320949094e-2*t156-0.1519139320949094e-2*t197+0.3751566060716043e0*t135*torso_com_offset_x;
	t241 = t7*t4;
	t248 = t2*t18;
	t253 = t2*t12;
	t255 = t7*t22;
	t256 = t255*t9;
	t257 = -t253+t256;
	t266 = -0.7476565615762858e-2*t241*t44-0.1921208562644173e-2*t241*t119-0.3751566060716043e0*t2*torso_com_offset_x+0.1519139320949094e-2*t248+0.1120309233738270e-3*t241-0.5731161176002540e-1*t2*t9-0.1519139320949094e-2*t253+0.3398172114871207e-3*t257*t44+0.7476565615762858e-2*t257*t39+0.1953462608228318e-2*t257*t54+0.1942475754413761e-2*t257*t51;
	t277 = t255*t15;
	t278 = t248+t277;
	t291 = -0.1911894034835472e-3*t257*t64+0.7126706962557625e-2*t257*t61-0.1921208562644173e-2*t257*t76+0.1929872411855646e-2*t257*t71+0.5731161176002540e-1*t2*t15+0.3398172114871207e-3*t278*t91+0.7476565615762858e-2*t278*t87+0.1953462608228318e-2*t278*t101+0.1942475754413761e-2*t278*t98-0.1911894034835472e-3*t278*t112+0.7126706962557625e-2*t278*t109;
	t313 = -0.1921208562644173e-2*t278*t122+0.1929872411855646e-2*t278*t119+0.9999999999999999e0*zT-0.1929872411855646e-2*t241*t122-0.5731161176002540e-1*t255*t12+0.1519139320949094e-2*t256+0.3398172114871207e-3*t241*t39+0.1953462608228318e-2*t241*t51-0.1942475754413761e-2*t241*t54-0.1911894034835472e-3*t241*t61-0.7126706962557625e-2*t241*t64;
	t337 = -0.1921208562644173e-2*t241*t71-0.1929872411855646e-2*t241*t76-0.5731161176002540e-1*t255*t18+0.1519139320949094e-2*t277+0.1953462608228318e-2*t241*t98-0.1942475754413761e-2*t241*t101-0.1911894034835472e-3*t241*t109-0.7126706962557625e-2*t241*t112+0.3751566060716043e0*t241*t26+0.3751566060716043e0*t255*t32+0.3398172114871207e-3*t241*t87-0.7476565615762858e-2*t241*t91;
	pcm(1) = t42+t74+t104+t132;
	pcm(2) = t166+t191+t217+t238;
	pcm(3) = t266+t291+t313+t337;
	
	p0 = zeros(3,1);
	p0(1) = xT;
	p0(2) = yT;
	p0(3) = zT;
	
	p0T = zeros(3,1);
	t1 = sin(qzT);
	t2 = sin(qxT);
	t5 = cos(qzT);
	t6 = sin(qyT);
	t8 = cos(qxT);
	t18 = cos(qyT);
	p0T(1) = xT+0.5800000000000000e0*t1*t2+0.5800000000000000e0*t5*t6*t8;
	p0T(2) = yT-0.5800000000000000e0*t5*t2+0.5800000000000000e0*t1*t6*t8;
	p0T(3) = zT+0.5800000000000000e0*t18*t8;
	
	pHR = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t12 = cos(qxT);
	t15 = sin(q3R);
	pHR(1) = xT+0.1834000000000000e0*t1*t2*t4-0.1834000000000000e0*(t7*t8+t1*t10*t12)*t15;
	pHR(2) = yT+0.1834000000000000e0*t7*t2*t4-0.1834000000000000e0*(-t1*t8+t7*t10*t12)*t15;
	pHR(3) = zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t2*t12*t15;
	
	p1R = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t21 = sin(q1R);
	t27 = cos(q1R);
	t31 = t7*t2;
	t35 = t7*t10;
	t37 = -t1*t8+t35*t12;
	t53 = t2*t12;
	p1R(1) = xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*(-t7*t12+t11*t8)*t21+0.4000000000000000e0*(t3*t15+t14*t4)*t27;
	p1R(2) = yT+0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.4000000000000000e0*(t1*t12+t35*t8)*t21+0.4000000000000000e0*(t31*t15+t37*t4)*t27;
	p1R(3) = zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.4000000000000000e0*t2*t8*t21+0.4000000000000000e0*(-t10*t15+t53*t4)*t27;
	
	p2R = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t21 = sin(q2R);
	t27 = cos(q2R);
	t31 = t7*t2;
	t35 = t7*t10;
	t37 = -t1*t8+t35*t12;
	t53 = t2*t12;
	p2R(1) = xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*(-t7*t12+t11*t8)*t21+0.5000000000000000e0*(t3*t15+t14*t4)*t27;
	p2R(2) = yT+0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.5000000000000000e0*(t1*t12+t35*t8)*t21+0.5000000000000000e0*(t31*t15+t37*t4)*t27;
	p2R(3) = zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.5000000000000000e0*t2*t8*t21+0.5000000000000000e0*(-t10*t15+t53*t4)*t27;
	
	p3R = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q1R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q1R);
	t30 = sin(q2R);
	t33 = cos(q2R);
	t37 = t7*t2;
	t41 = t7*t10;
	t43 = -t1*t8+t41*t12;
	t48 = t1*t12+t41*t8;
	t53 = t37*t15+t43*t4;
	t63 = t2*t12;
	t66 = t2*t8;
	t71 = -t10*t15+t63*t4;
	p3R(1) = xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*t20*t21+0.4000000000000000e0*t26*t27-0.5000000000000000e0*t30*t20+0.5000000000000000e0*t26*t33;
	p3R(2) = yT+0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.4000000000000000e0*t48*t21+0.4000000000000000e0*t53*t27-0.5000000000000000e0*t48*t30+0.5000000000000000e0*t53*t33;
	p3R(3) = zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.4000000000000000e0*t66*t21+0.4000000000000000e0*t71*t27-0.5000000000000000e0*t66*t30+0.5000000000000000e0*t71*t33;
	
	p4R = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t37 = t7*t2;
	t41 = t7*t10;
	t43 = -t1*t8+t41*t12;
	t48 = t1*t12+t41*t8;
	t53 = t37*t15+t43*t4;
	t63 = t2*t12;
	t66 = t2*t8;
	t71 = -t10*t15+t63*t4;
	p4R(1) = xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*t20*t21+0.5000000000000000e0*t26*t27+(-t30*t20+t32*t26)*leg_length;
	p4R(2) = yT+0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.5000000000000000e0*t48*t21+0.5000000000000000e0*t53*t27+(-t48*t30+t53*t32)*leg_length;
	p4R(3) = zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.5000000000000000e0*t66*t21+0.5000000000000000e0*t71*t27+(-t66*t30+t71*t32)*leg_length;
	
	pHL = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t4 = cos(q3L);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t12 = cos(qxT);
	t15 = sin(q3L);
	pHL(1) = xT-0.1834000000000000e0*t1*t2*t4-0.1834000000000000e0*(t7*t8+t1*t10*t12)*t15;
	pHL(2) = yT-0.1834000000000000e0*t7*t2*t4-0.1834000000000000e0*(-t1*t8+t7*t10*t12)*t15;
	pHL(3) = zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t2*t12*t15;
	
	p1L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3L);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3L);
	t21 = sin(q1L);
	t27 = cos(q1L);
	t31 = t7*t2;
	t35 = t7*t10;
	t37 = -t1*t8+t35*t12;
	t53 = t2*t12;
	p1L(1) = xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*(-t7*t12+t11*t8)*t21+0.4000000000000000e0*(-t3*t15+t14*t4)*t27;
	p1L(2) = yT-0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.4000000000000000e0*(t1*t12+t35*t8)*t21+0.4000000000000000e0*(-t31*t15+t37*t4)*t27;
	p1L(3) = zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.4000000000000000e0*t2*t8*t21+0.4000000000000000e0*(t10*t15+t53*t4)*t27;
	
	p2L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3L);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3L);
	t21 = sin(q2L);
	t27 = cos(q2L);
	t31 = t7*t2;
	t35 = t7*t10;
	t37 = -t1*t8+t35*t12;
	t53 = t2*t12;
	p2L(1) = xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*(-t7*t12+t11*t8)*t21+0.5000000000000000e0*(-t3*t15+t14*t4)*t27;
	p2L(2) = yT-0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.5000000000000000e0*(t1*t12+t35*t8)*t21+0.5000000000000000e0*(-t31*t15+t37*t4)*t27;
	p2L(3) = zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.5000000000000000e0*t2*t8*t21+0.5000000000000000e0*(t10*t15+t53*t4)*t27;
	
	p3L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3L);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3L);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q1L);
	t26 = -t3*t15+t14*t4;
	t27 = cos(q1L);
	t30 = sin(q2L);
	t33 = cos(q2L);
	t37 = t7*t2;
	t41 = t7*t10;
	t43 = -t1*t8+t41*t12;
	t48 = t1*t12+t41*t8;
	t53 = -t37*t15+t43*t4;
	t63 = t2*t12;
	t66 = t2*t8;
	t71 = t10*t15+t63*t4;
	p3L(1) = xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*t20*t21+0.4000000000000000e0*t26*t27-0.5000000000000000e0*t20*t30+0.5000000000000000e0*t26*t33;
	p3L(2) = yT-0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.4000000000000000e0*t48*t21+0.4000000000000000e0*t53*t27-0.5000000000000000e0*t48*t30+0.5000000000000000e0*t53*t33;
	p3L(3) = zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.4000000000000000e0*t66*t21+0.4000000000000000e0*t71*t27-0.5000000000000000e0*t66*t30+0.5000000000000000e0*t71*t33;
	
	p4L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3L);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3L);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q2L);
	t26 = -t3*t15+t14*t4;
	t27 = cos(q2L);
	t30 = sin(q1L);
	t32 = cos(q1L);
	t37 = t7*t2;
	t41 = t7*t10;
	t43 = -t1*t8+t41*t12;
	t48 = t1*t12+t41*t8;
	t53 = -t37*t15+t43*t4;
	t63 = t2*t12;
	t66 = t2*t8;
	t71 = t10*t15+t63*t4;
	p4L(1) = xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*t20*t21+0.5000000000000000e0*t26*t27+(-t20*t30+t26*t32)*leg_length;
	p4L(2) = yT-0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.5000000000000000e0*t48*t21+0.5000000000000000e0*t53*t27+(-t48*t30+t53*t32)*leg_length;
	p4L(3) = zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.5000000000000000e0*t66*t21+0.5000000000000000e0*t71*t27+(-t66*t30+t71*t32)*leg_length;
	
end
