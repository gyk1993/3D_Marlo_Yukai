function [pcm, p0, p0T, pHR, p1R, p2R, p3R, p4R, pHL, p1L, p2L, p3L, p4L] = ATRIAS3D_Positions_Right(q, extra_vars) %#codegen
	% Generated by writeOptimizedFunctions (17 Oct 2016 14:01:36)

	qzT = q(1);
	qyT = q(2);
	qxT = q(3);
	q1R = q(4);
	q2R = q(5);
	q1L = q(6);
	q2L = q(7);
	qgr1R = q(8);
	qgr2R = q(9);
	q3R = q(10);
	qgr1L = q(11);
	qgr2L = q(12);
	q3L = q(13);
	leg_length = extra_vars(1);
	torso_com_offset_x = extra_vars(2);
	torso_com_offset_y = extra_vars(3);
	torso_com_offset_z = extra_vars(4);

	pcm = zeros(3,1);
	t1 = sin(qzT);
	t2 = cos(qxT);
	t3 = t1*t2;
	t5 = sin(qxT);
	t7 = cos(qzT);
	t8 = sin(qyT);
	t9 = t7*t8;
	t11 = t1*t5+t2*t9;
	t12 = sin(q3R);
	t15 = cos(q3R);
	t16 = t11*t15;
	t18 = t9*t5;
	t19 = -t3+t18;
	t20 = cos(q1R);
	t23 = cos(qyT);
	t24 = t23*t7;
	t25 = t24*t12;
	t26 = t25+t16;
	t27 = sin(q1R);
	t30 = t26*t20;
	t32 = t19*t27;
	t34 = cos(qgr1R);
	t37 = sin(qgr1R);
	t44 = -0.1120309233738270e-3*t3+0.1260883882399746e0*t11*t12+0.1519139320949094e-2*t16+0.3398172114871207e-3*t19*t20+0.3398172114871207e-3*t26*t27+0.7476565615762858e-2*t30-0.7476565615762858e-2*t32+0.1953462608228318e-2*t19*t34+0.1953462608228318e-2*t26*t37+0.1942475754413761e-2*t26*t34-0.1942475754413761e-2*t19*t37;
	t45 = cos(q2R);
	t48 = sin(q2R);
	t55 = cos(qgr2R);
	t58 = sin(qgr2R);
	t65 = sin(q3L);
	t68 = cos(q3L);
	t69 = t11*t68;
	t71 = cos(q1L);
	t74 = t24*t65;
	t75 = -t74+t69;
	t76 = sin(q1L);
	t79 = -0.1911894034835472e-3*t19*t45-0.1911894034835472e-3*t26*t48-0.4928732930374423e0*t26*t45+0.4928732930374423e0*t19*t48-0.1921208562644173e-2*t19*t55-0.1921208562644173e-2*t26*t58+0.1929872411855646e-2*t26*t55-0.1929872411855646e-2*t19*t58-0.5731161176002540e-1*t11*t65+0.1519139320949094e-2*t69+0.3398172114871207e-3*t19*t71+0.3398172114871207e-3*t75*t76;
	t85 = cos(qgr1L);
	t88 = sin(qgr1L);
	t95 = cos(q2L);
	t98 = sin(q2L);
	t105 = cos(qgr2L);
	t108 = 0.7476565615762858e-2*t75*t71-0.7476565615762858e-2*t19*t76+0.1953462608228318e-2*t19*t85+0.1953462608228318e-2*t75*t88+0.1942475754413761e-2*t75*t85-0.1942475754413761e-2*t19*t88-0.1911894034835472e-3*t19*t95-0.1911894034835472e-3*t75*t98+0.7126706962557625e-2*t75*t95-0.7126706962557625e-2*t19*t98-0.1921208562644173e-2*t19*t105;
	t109 = sin(qgr2L);
	t119 = -0.179999999999999995e-2+torso_com_offset_y;
	t122 = 0.402399999999999980e0+torso_com_offset_z;
	t134 = -0.1921208562644173e-2*t75*t109+0.1929872411855646e-2*t75*t105-0.1929872411855646e-2*t19*t109-0.9999999999999999e0*(-t32+t30)*leg_length+0.3751566060716043e0*t19*t119+0.3751566060716043e0*t11*t122+0.1120309233738270e-3*t18-0.1260883882399746e0*t24*t15+0.1519139320949094e-2*t25-0.5731161176002540e-1*t24*t68-0.1519139320949094e-2*t74+0.3751566060716043e0*t24*torso_com_offset_x;
	t137 = t7*t2;
	t140 = t1*t8;
	t142 = -t7*t5+t140*t2;
	t145 = t142*t15;
	t147 = t140*t5;
	t148 = t137+t147;
	t151 = t1*t23;
	t152 = t151*t12;
	t153 = t152+t145;
	t156 = t153*t20;
	t158 = t148*t27;
	t168 = 0.1120309233738270e-3*t137+0.1260883882399746e0*t142*t12+0.1519139320949094e-2*t145+0.3398172114871207e-3*t148*t20+0.3398172114871207e-3*t153*t27+0.7476565615762858e-2*t156-0.7476565615762858e-2*t158+0.1953462608228318e-2*t148*t34+0.1953462608228318e-2*t153*t37+0.1942475754413761e-2*t153*t34-0.1942475754413761e-2*t148*t37;
	t187 = t142*t68;
	t191 = t151*t65;
	t192 = -t191+t187;
	t195 = -0.1911894034835472e-3*t148*t45-0.1911894034835472e-3*t153*t48-0.4928732930374423e0*t153*t45+0.4928732930374423e0*t148*t48-0.1921208562644173e-2*t148*t55-0.1921208562644173e-2*t153*t58+0.1929872411855646e-2*t153*t55-0.1929872411855646e-2*t148*t58-0.5731161176002540e-1*t142*t65+0.1519139320949094e-2*t187+0.3398172114871207e-3*t148*t71+0.3398172114871207e-3*t192*t76;
	t219 = 0.7476565615762858e-2*t192*t71-0.7476565615762858e-2*t148*t76+0.1953462608228318e-2*t148*t85+0.1953462608228318e-2*t192*t88+0.1942475754413761e-2*t192*t85-0.1942475754413761e-2*t148*t88-0.1911894034835472e-3*t148*t95-0.1911894034835472e-3*t192*t98+0.7126706962557625e-2*t192*t95-0.7126706962557625e-2*t148*t98-0.1921208562644173e-2*t148*t105;
	t242 = -0.1921208562644173e-2*t192*t109+0.1929872411855646e-2*t192*t105-0.1929872411855646e-2*t148*t109-0.9999999999999999e0*(-t158+t156)*leg_length+0.3751566060716043e0*t148*t119-0.1260883882399746e0*t151*t15+0.1120309233738270e-3*t147+0.1519139320949094e-2*t152-0.5731161176002540e-1*t151*t68-0.1519139320949094e-2*t191+0.3751566060716043e0*t151*torso_com_offset_x+0.3751566060716043e0*t142*t122;
	t245 = t23*t5;
	t256 = t23*t2;
	t261 = t256*t15;
	t263 = t245*t27;
	t269 = -0.1911894034835472e-3*t245*t95-0.7126706962557625e-2*t245*t98-0.1929872411855646e-2*t245*t58+0.3398172114871207e-3*t245*t20-0.1942475754413761e-2*t245*t88-0.5731161176002540e-1*t256*t65+0.1260883882399746e0*t256*t12+0.1519139320949094e-2*t261-0.7476565615762858e-2*t263+0.1953462608228318e-2*t245*t34-0.1942475754413761e-2*t245*t37;
	t276 = t256*t68;
	t292 = -0.1911894034835472e-3*t245*t45+0.4928732930374423e0*t245*t48-0.1921208562644173e-2*t245*t55+0.1519139320949094e-2*t276+0.1953462608228318e-2*t245*t85-0.1921208562644173e-2*t245*t105-0.1929872411855646e-2*t245*t109+0.3751566060716043e0*t245*t119+0.3751566060716043e0*t256*t122+0.3398172114871207e-3*t245*t71-0.7476565615762858e-2*t245*t76;
	t294 = t8*t65;
	t299 = t8*t12;
	t301 = -t299+t261;
	t304 = t301*t20;
	t316 = 0.1519139320949094e-2*t294+0.1120309233738270e-3*t245+0.1260883882399746e0*t8*t15-0.1519139320949094e-2*t299+0.3398172114871207e-3*t301*t27+0.7476565615762858e-2*t304+0.1953462608228318e-2*t301*t37+0.1942475754413761e-2*t301*t34-0.1911894034835472e-3*t301*t48-0.4928732930374423e0*t301*t45-0.1921208562644173e-2*t301*t58;
	t321 = t294+t276;
	t343 = 0.1929872411855646e-2*t301*t55+0.5731161176002540e-1*t8*t68+0.3398172114871207e-3*t321*t76+0.7476565615762858e-2*t321*t71+0.1953462608228318e-2*t321*t88+0.1942475754413761e-2*t321*t85-0.1911894034835472e-3*t321*t98+0.7126706962557625e-2*t321*t95-0.1921208562644173e-2*t321*t109+0.1929872411855646e-2*t321*t105-0.9999999999999999e0*(-t263+t304)*leg_length-0.3751566060716043e0*t8*torso_com_offset_x;
	pcm(1) = t44+t79+t108+t134;
	pcm(2) = t168+t195+t219+t242;
	pcm(3) = t269+t292+t316+t343;
	
	p0 = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t37 = t7*t2;
	t41 = t7*t10;
	t43 = -t1*t8+t41*t12;
	t48 = t1*t12+t41*t8;
	t53 = t37*t15+t43*t4;
	t63 = t2*t12;
	t66 = t2*t8;
	t71 = -t10*t15+t63*t4;
	p0(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length;
	p0(2) = -0.1834000000000000e0*t37*t4+0.1834000000000000e0*t43*t15+0.5000000000000000e0*t48*t21-0.5000000000000000e0*t53*t27-(-t48*t30+t53*t32)*leg_length;
	p0(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t63*t15+0.5000000000000000e0*t66*t21-0.5000000000000000e0*t71*t27-(-t66*t30+t71*t32)*leg_length;
	
	p0T = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t9 = t7*t8;
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t13 = t11*t12;
	t14 = t9+t13;
	t15 = sin(q3R);
	t20 = -t7*t12+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t39 = t7*t2;
	t42 = t1*t8;
	t43 = t7*t10;
	t44 = t43*t12;
	t45 = -t42+t44;
	t50 = t1*t12+t43*t8;
	t55 = t39*t15+t45*t4;
	t67 = t2*t12;
	t70 = t2*t8;
	t75 = -t10*t15+t67*t4;
	p0T(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length+0.5800000000000000e0*t9+0.5800000000000000e0*t13;
	p0T(2) = -0.1834000000000000e0*t39*t4+0.1834000000000000e0*t45*t15+0.5000000000000000e0*t50*t21-0.5000000000000000e0*t55*t27-(-t50*t30+t55*t32)*leg_length-0.5800000000000000e0*t42+0.5800000000000000e0*t44;
	p0T(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t67*t15+0.5000000000000000e0*t70*t21-0.5000000000000000e0*t75*t27-(-t70*t30+t75*t32)*leg_length+0.5800000000000000e0*t67;
	
	pHR = zeros(3,1);
	t1 = sin(qzT);
	t2 = cos(qxT);
	t4 = cos(qzT);
	t5 = sin(qyT);
	t6 = t4*t5;
	t7 = sin(qxT);
	t9 = -t1*t2+t6*t7;
	t10 = sin(q2R);
	t13 = cos(qyT);
	t15 = sin(q3R);
	t20 = cos(q3R);
	t22 = t4*t13*t15+(t1*t7+t6*t2)*t20;
	t23 = cos(q2R);
	t26 = sin(q1R);
	t28 = cos(q1R);
	t34 = t1*t5;
	t36 = t4*t2+t34*t7;
	t45 = t1*t13*t15+(-t7*t4+t34*t2)*t20;
	t53 = t13*t7;
	t59 = -t5*t15+t13*t2*t20;
	pHR(1) = 0.5000000000000000e0*t9*t10-0.5000000000000000e0*t22*t23-(-t9*t26+t22*t28)*leg_length;
	pHR(2) = 0.5000000000000000e0*t36*t10-0.5000000000000000e0*t45*t23-(-t36*t26+t45*t28)*leg_length;
	pHR(3) = 0.5000000000000000e0*t53*t10-0.5000000000000000e0*t59*t23-(-t53*t26+t59*t28)*leg_length;
	
	p1R = zeros(3,1);
	t1 = sin(qzT);
	t2 = cos(qxT);
	t4 = cos(qzT);
	t5 = sin(qyT);
	t6 = t4*t5;
	t7 = sin(qxT);
	t9 = -t1*t2+t6*t7;
	t10 = sin(q2R);
	t13 = cos(qyT);
	t15 = sin(q3R);
	t20 = cos(q3R);
	t22 = t4*t13*t15+(t1*t7+t6*t2)*t20;
	t23 = cos(q2R);
	t26 = sin(q1R);
	t27 = t9*t26;
	t28 = cos(q1R);
	t29 = t22*t28;
	t36 = t1*t5;
	t38 = t4*t2+t36*t7;
	t47 = t1*t13*t15+(-t7*t4+t36*t2)*t20;
	t50 = t38*t26;
	t51 = t47*t28;
	t57 = t13*t7;
	t63 = -t5*t15+t13*t2*t20;
	t66 = t57*t26;
	t67 = t63*t28;
	p1R(1) = 0.5000000000000000e0*t9*t10-0.5000000000000000e0*t22*t23-(-t27+t29)*leg_length-0.4000000000000000e0*t27+0.4000000000000000e0*t29;
	p1R(2) = 0.5000000000000000e0*t38*t10-0.5000000000000000e0*t47*t23-(-t50+t51)*leg_length-0.4000000000000000e0*t50+0.4000000000000000e0*t51;
	p1R(3) = 0.5000000000000000e0*t57*t10-0.5000000000000000e0*t63*t23-(-t66+t67)*leg_length-0.4000000000000000e0*t66+0.4000000000000000e0*t67;
	
	p2R = zeros(3,1);
	t1 = sin(qzT);
	t2 = cos(qxT);
	t4 = cos(qzT);
	t5 = sin(qyT);
	t6 = t4*t5;
	t7 = sin(qxT);
	t10 = sin(q1R);
	t12 = cos(qyT);
	t14 = sin(q3R);
	t19 = cos(q3R);
	t22 = cos(q1R);
	t27 = t1*t5;
	p2R(1) = -(-(-t1*t2+t6*t7)*t10+(t4*t12*t14+(t1*t7+t6*t2)*t19)*t22)*leg_length;
	p2R(2) = -(-(t4*t2+t27*t7)*t10+(t1*t12*t14+(-t4*t7+t27*t2)*t19)*t22)*leg_length;
	p2R(3) = -(-t12*t7*t10+(-t5*t14+t12*t2*t19)*t22)*leg_length;
	
	p3R = zeros(3,1);
	t1 = sin(qzT);
	t2 = cos(qxT);
	t4 = cos(qzT);
	t5 = sin(qyT);
	t6 = t4*t5;
	t7 = sin(qxT);
	t10 = sin(q1R);
	t11 = (-t1*t2+t6*t7)*t10;
	t12 = cos(qyT);
	t14 = sin(q3R);
	t19 = cos(q3R);
	t22 = cos(q1R);
	t23 = (t4*t12*t14+(t1*t7+t6*t2)*t19)*t22;
	t30 = t1*t5;
	t33 = (t4*t2+t30*t7)*t10;
	t41 = (t1*t12*t14+(-t4*t7+t30*t2)*t19)*t22;
	t48 = t12*t7*t10;
	t53 = (-t5*t14+t12*t2*t19)*t22;
	p3R(1) = -(-t11+t23)*leg_length-0.4000000000000000e0*t11+0.4000000000000000e0*t23;
	p3R(2) = -(-t33+t41)*leg_length-0.4000000000000000e0*t33+0.4000000000000000e0*t41;
	p3R(3) = -(-t48+t53)*leg_length-0.4000000000000000e0*t48+0.4000000000000000e0*t53;
	
	p4R = zeros(3,1);
	p4R(1) = 0;
	p4R(2) = 0;
	p4R(3) = 0;
	
	pHL = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t12*t7+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t36 = cos(q3L);
	t39 = sin(q3L);
	t43 = t7*t2;
	t47 = t7*t10;
	t49 = -t1*t8+t47*t12;
	t54 = t1*t12+t47*t8;
	t59 = t43*t15+t49*t4;
	t73 = t12*t2;
	t76 = t2*t8;
	t81 = -t10*t15+t73*t4;
	pHL(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length-0.1834000000000000e0*t3*t36-0.1834000000000000e0*t14*t39;
	pHL(2) = -0.1834000000000000e0*t43*t4+0.1834000000000000e0*t49*t15+0.5000000000000000e0*t54*t21-0.5000000000000000e0*t59*t27-(-t54*t30+t59*t32)*leg_length-0.1834000000000000e0*t43*t36-0.1834000000000000e0*t49*t39;
	pHL(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t73*t15+0.5000000000000000e0*t76*t21-0.5000000000000000e0*t81*t27-(-t76*t30+t81*t32)*leg_length+0.1834000000000000e0*t10*t36-0.1834000000000000e0*t73*t39;
	
	p1L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t12*t7+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t36 = cos(q3L);
	t39 = sin(q3L);
	t42 = sin(q1L);
	t48 = cos(q1L);
	t52 = t7*t2;
	t56 = t7*t10;
	t58 = -t1*t8+t56*t12;
	t63 = t1*t12+t56*t8;
	t68 = t52*t15+t58*t4;
	t89 = t12*t2;
	t92 = t2*t8;
	t97 = -t10*t15+t89*t4;
	p1L(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length-0.1834000000000000e0*t3*t36-0.1834000000000000e0*t14*t39-0.4000000000000000e0*t20*t42+0.4000000000000000e0*(-t3*t39+t14*t36)*t48;
	p1L(2) = -0.1834000000000000e0*t52*t4+0.1834000000000000e0*t58*t15+0.5000000000000000e0*t63*t21-0.5000000000000000e0*t68*t27-(-t63*t30+t68*t32)*leg_length-0.1834000000000000e0*t52*t36-0.1834000000000000e0*t58*t39-0.4000000000000000e0*t63*t42+0.4000000000000000e0*(-t52*t39+t58*t36)*t48;
	p1L(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t89*t15+0.5000000000000000e0*t92*t21-0.5000000000000000e0*t97*t27-(-t92*t30+t97*t32)*leg_length+0.1834000000000000e0*t10*t36-0.1834000000000000e0*t89*t39-0.4000000000000000e0*t92*t42+0.4000000000000000e0*(t10*t39+t89*t36)*t48;
	
	p2L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t12*t7+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t36 = cos(q3L);
	t39 = sin(q3L);
	t42 = sin(q2L);
	t48 = cos(q2L);
	t52 = t7*t2;
	t56 = t7*t10;
	t58 = -t1*t8+t56*t12;
	t63 = t1*t12+t56*t8;
	t68 = t52*t15+t58*t4;
	t89 = t12*t2;
	t92 = t2*t8;
	t97 = -t10*t15+t89*t4;
	p2L(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length-0.1834000000000000e0*t3*t36-0.1834000000000000e0*t14*t39-0.5000000000000000e0*t20*t42+0.5000000000000000e0*(-t3*t39+t14*t36)*t48;
	p2L(2) = -0.1834000000000000e0*t52*t4+0.1834000000000000e0*t58*t15+0.5000000000000000e0*t63*t21-0.5000000000000000e0*t68*t27-(-t63*t30+t68*t32)*leg_length-0.1834000000000000e0*t52*t36-0.1834000000000000e0*t58*t39-0.5000000000000000e0*t63*t42+0.5000000000000000e0*(-t52*t39+t58*t36)*t48;
	p2L(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t89*t15+0.5000000000000000e0*t92*t21-0.5000000000000000e0*t97*t27-(-t92*t30+t97*t32)*leg_length+0.1834000000000000e0*t10*t36-0.1834000000000000e0*t89*t39-0.5000000000000000e0*t92*t42+0.5000000000000000e0*(t10*t39+t89*t36)*t48;
	
	p3L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t12*t7+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t36 = cos(q3L);
	t39 = sin(q3L);
	t42 = sin(q1L);
	t47 = -t3*t39+t14*t36;
	t48 = cos(q1L);
	t51 = sin(q2L);
	t54 = cos(q2L);
	t57 = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length-0.1834000000000000e0*t3*t36-0.1834000000000000e0*t14*t39-0.4000000000000000e0*t20*t42+0.4000000000000000e0*t47*t48-0.5000000000000000e0*t20*t51+0.5000000000000000e0*t47*t54;
	t58 = t7*t2;
	t62 = t7*t10;
	t64 = -t1*t8+t62*t12;
	t69 = t1*t12+t62*t8;
	t74 = t58*t15+t64*t4;
	t89 = -t58*t39+t64*t36;
	t96 = -0.1834000000000000e0*t58*t4+0.1834000000000000e0*t64*t15+0.5000000000000000e0*t69*t21-0.5000000000000000e0*t74*t27-(-t69*t30+t74*t32)*leg_length-0.1834000000000000e0*t58*t36-0.1834000000000000e0*t64*t39-0.4000000000000000e0*t69*t42+0.4000000000000000e0*t89*t48-0.5000000000000000e0*t69*t51+0.5000000000000000e0*t89*t54;
	t99 = t12*t2;
	t102 = t2*t8;
	t107 = -t10*t15+t99*t4;
	t122 = t10*t39+t99*t36;
	t129 = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t99*t15+0.5000000000000000e0*t102*t21-0.5000000000000000e0*t107*t27-(-t102*t30+t107*t32)*leg_length+0.1834000000000000e0*t10*t36-0.1834000000000000e0*t99*t39-0.4000000000000000e0*t102*t42+0.4000000000000000e0*t122*t48-0.5000000000000000e0*t102*t51+0.5000000000000000e0*t122*t54;
	p3L(1) = t57;
	p3L(2) = t96;
	p3L(3) = t129;
	
	p4L = zeros(3,1);
	t1 = cos(qzT);
	t2 = cos(qyT);
	t3 = t1*t2;
	t4 = cos(q3R);
	t7 = sin(qzT);
	t8 = sin(qxT);
	t10 = sin(qyT);
	t11 = t1*t10;
	t12 = cos(qxT);
	t14 = t7*t8+t11*t12;
	t15 = sin(q3R);
	t20 = -t12*t7+t11*t8;
	t21 = sin(q2R);
	t26 = t3*t15+t14*t4;
	t27 = cos(q2R);
	t30 = sin(q1R);
	t32 = cos(q1R);
	t36 = cos(q3L);
	t39 = sin(q3L);
	t42 = sin(q2L);
	t47 = -t3*t39+t14*t36;
	t48 = cos(q2L);
	t51 = sin(q1L);
	t53 = cos(q1L);
	t58 = t7*t2;
	t62 = t7*t10;
	t64 = -t1*t8+t62*t12;
	t69 = t1*t12+t62*t8;
	t74 = t58*t15+t64*t4;
	t89 = -t58*t39+t64*t36;
	t99 = t12*t2;
	t102 = t2*t8;
	t107 = -t10*t15+t99*t4;
	t122 = t10*t39+t99*t36;
	p4L(1) = -0.1834000000000000e0*t3*t4+0.1834000000000000e0*t14*t15+0.5000000000000000e0*t20*t21-0.5000000000000000e0*t26*t27-(-t20*t30+t26*t32)*leg_length-0.1834000000000000e0*t3*t36-0.1834000000000000e0*t14*t39-0.5000000000000000e0*t20*t42+0.5000000000000000e0*t47*t48+(-t20*t51+t47*t53)*leg_length;
	p4L(2) = -0.1834000000000000e0*t58*t4+0.1834000000000000e0*t64*t15+0.5000000000000000e0*t69*t21-0.5000000000000000e0*t74*t27-(-t69*t30+t74*t32)*leg_length-0.1834000000000000e0*t58*t36-0.1834000000000000e0*t64*t39-0.5000000000000000e0*t69*t42+0.5000000000000000e0*t89*t48+(-t69*t51+t89*t53)*leg_length;
	p4L(3) = 0.1834000000000000e0*t10*t4+0.1834000000000000e0*t99*t15+0.5000000000000000e0*t102*t21-0.5000000000000000e0*t107*t27-(-t102*t30+t107*t32)*leg_length+0.1834000000000000e0*t10*t36-0.1834000000000000e0*t99*t39-0.5000000000000000e0*t102*t42+0.5000000000000000e0*t122*t48+(-t102*t51+t122*t53)*leg_length;
	
end
