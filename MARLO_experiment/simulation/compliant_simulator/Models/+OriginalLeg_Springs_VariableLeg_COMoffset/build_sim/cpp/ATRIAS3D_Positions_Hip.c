/* ATRIAS3D_POSITIONS_HIP 
 * Generated by writeOptimizedFunctions (13 Oct 2016 17:39:38)
 */

#include "ATRIAS3D_Positions_Hip.h"

void ATRIAS3D_Positions_Hip(const double q[16], const double extra_vars[4], double pcm[3], double p0[3], double p0T[3], double pHR[3], double p1R[3], double p2R[3], double p3R[3], double p4R[3], double pHL[3], double p1L[3], double p2L[3], double p3L[3], double p4L[3])
{
  double xT = q[0];
  double yT = q[1];
  double zT = q[2];
  double qzT = q[3];
  double qyT = q[4];
  double qxT = q[5];
  double q1R = q[6];
  double q2R = q[7];
  double q1L = q[8];
  double q2L = q[9];
  double qgr1R = q[10];
  double qgr2R = q[11];
  double q3R = q[12];
  double qgr1L = q[13];
  double qgr2L = q[14];
  double q3L = q[15];
  double leg_length = extra_vars[0];
  double torso_com_offset_x = extra_vars[1];
  double torso_com_offset_y = extra_vars[2];
  double torso_com_offset_z = extra_vars[3];

  double t1;
  double t10;
  double t101;
  double t104;
  double t109;
  double t11;
  double t112;
  double t115;
  double t12;
  double t132;
  double t135;
  double t137;
  double t138;
  double t139;
  double t14;
  double t144;
  double t149;
  double t15;
  double t153;
  double t154;
  double t155;
  double t16;
  double t166;
  double t17;
  double t18;
  double t189;
  double t191;
  double t195;
  double t196;
  double t2;
  double t20;
  double t21;
  double t217;
  double t23;
  double t238;
  double t24;
  double t243;
  double t245;
  double t249;
  double t251;
  double t252;
  double t253;
  double t26;
  double t266;
  double t27;
  double t273;
  double t274;
  double t29;
  double t291;
  double t3;
  double t30;
  double t31;
  double t314;
  double t32;
  double t33;
  double t337;
  double t35;
  double t37;
  double t4;
  double t40;
  double t41;
  double t43;
  double t46;
  double t48;
  double t5;
  double t51;
  double t53;
  double t54;
  double t6;
  double t61;
  double t63;
  double t64;
  double t66;
  double t7;
  double t71;
  double t74;
  double t75;
  double t77;
  double t79;
  double t8;
  double t82;
  double t83;
  double t84;
  double t9;
  double t91;
  double t94;

  t1=sin(qzT);
  t2=cos(qxT);
  t3=t1*t2;
  t5=cos(qzT);
  t6=sin(qyT);
  t7=t5*t6;
  t8=sin(qxT);
  t9=t7*t8;
  t10=-t3+t9;
  t11=-0.179999999999999995e-2+torso_com_offset_y;
  t16=t1*t8+t7*t2;
  t17=0.402399999999999980e0+torso_com_offset_z;
  t20=sin(q3R);
  t23=cos(q3R);
  t24=t16*t23;
  t26=cos(q1R);
  t29=cos(qyT);
  t30=t5*t29;
  t31=t30*t20;
  t32=t31+t24;
  t33=sin(q1R);
  t40=cos(qgr1R);
  t43=sin(qgr1R);
  t46=-0.1120309233738270e-3*t3+0.3751566060716043e0*t10*t11+0.3751566060716043e0*t16*t17-0.5731161176002540e-1*t16*t20+0.1519139320949094e-2*t24+0.3398172114871207e-3*t10*t26+0.3398172114871207e-3*t32*t33+0.7476565615762858e-2*t32*t26-0.7476565615762858e-2*t10*t33+0.1953462608228318e-2*t10*t40+0.1953462608228318e-2*t32*t43;
  t51=cos(q2R);
  t54=sin(q2R);
  t61=cos(qgr2R);
  t64=sin(qgr2R);
  t71=sin(q3L);
  t74=cos(q3L);
  t75=t16*t74;
  t77=0.1942475754413761e-2*t32*t40-0.1942475754413761e-2*t10*t43-0.1911894034835472e-3*t10*t51-0.1911894034835472e-3*t32*t54+0.7126706962557625e-2*t32*t51-0.7126706962557625e-2*t10*t54-0.1921208562644173e-2*t10*t61-0.1921208562644173e-2*t32*t64+0.1929872411855646e-2*t32*t61-0.1929872411855646e-2*t10*t64-0.5731161176002540e-1*t16*t71+0.1519139320949094e-2*t75;
  t79=cos(q1L);
  t82=t30*t71;
  t83=-t82+t75;
  t84=sin(q1L);
  t91=cos(qgr1L);
  t94=sin(qgr1L);
  t101=cos(q2L);
  t104=sin(q2L);
  t109=0.3398172114871207e-3*t10*t79+0.3398172114871207e-3*t83*t84+0.7476565615762858e-2*t83*t79-0.7476565615762858e-2*t10*t84+0.1953462608228318e-2*t10*t91+0.1953462608228318e-2*t83*t94+0.1942475754413761e-2*t83*t91-0.1942475754413761e-2*t10*t94-0.1911894034835472e-3*t10*t101-0.1911894034835472e-3*t83*t104+0.7126706962557625e-2*t83*t101;
  t112=cos(qgr2L);
  t115=sin(qgr2L);
  t132=-0.7126706962557625e-2*t10*t104-0.1921208562644173e-2*t10*t112-0.1921208562644173e-2*t83*t115+0.1929872411855646e-2*t83*t112-0.1929872411855646e-2*t10*t115+0.9999999999999999e0*xT+0.1120309233738270e-3*t9+0.5731161176002540e-1*t30*t23+0.1519139320949094e-2*t31-0.5731161176002540e-1*t30*t74-0.1519139320949094e-2*t82+0.3751566060716043e0*t30*torso_com_offset_x;
  t135=t5*t2;
  t137=t1*t6;
  t138=t137*t8;
  t139=t135+t138;
  t144=-t5*t8+t137*t2;
  t149=t144*t23;
  t153=t1*t29;
  t154=t153*t20;
  t155=t154+t149;
  t166=0.1120309233738270e-3*t135+0.3751566060716043e0*t139*t11+0.3751566060716043e0*t144*t17-0.5731161176002540e-1*t144*t20+0.1519139320949094e-2*t149+0.3398172114871207e-3*t139*t26+0.3398172114871207e-3*t155*t33+0.7476565615762858e-2*t155*t26-0.7476565615762858e-2*t139*t33+0.1953462608228318e-2*t139*t40+0.1953462608228318e-2*t155*t43;
  t189=t144*t74;
  t191=0.1942475754413761e-2*t155*t40-0.1942475754413761e-2*t139*t43-0.1911894034835472e-3*t139*t51-0.1911894034835472e-3*t155*t54+0.7126706962557625e-2*t155*t51-0.7126706962557625e-2*t139*t54-0.1921208562644173e-2*t139*t61-0.1921208562644173e-2*t155*t64+0.1929872411855646e-2*t155*t61-0.1929872411855646e-2*t139*t64-0.5731161176002540e-1*t144*t71+0.1519139320949094e-2*t189;
  t195=t153*t71;
  t196=-t195+t189;
  t217=0.3398172114871207e-3*t139*t79+0.3398172114871207e-3*t196*t84+0.7476565615762858e-2*t196*t79-0.7476565615762858e-2*t139*t84+0.1953462608228318e-2*t139*t91+0.1953462608228318e-2*t196*t94+0.1942475754413761e-2*t196*t91-0.1942475754413761e-2*t139*t94-0.1911894034835472e-3*t139*t101-0.1911894034835472e-3*t196*t104+0.7126706962557625e-2*t196*t101;
  t238=-0.7126706962557625e-2*t139*t104-0.1921208562644173e-2*t139*t112-0.1921208562644173e-2*t196*t115+0.1929872411855646e-2*t196*t112-0.1929872411855646e-2*t139*t115+0.9999999999999999e0*yT-0.5731161176002540e-1*t153*t74+0.1120309233738270e-3*t138+0.5731161176002540e-1*t153*t23+0.1519139320949094e-2*t154-0.1519139320949094e-2*t195+0.3751566060716043e0*t153*torso_com_offset_x;
  t243=t6*t71;
  t245=t29*t8;
  t249=t6*t20;
  t251=t29*t2;
  t252=t251*t23;
  t253=-t249+t252;
  t266=-0.3751566060716043e0*t6*torso_com_offset_x+0.1519139320949094e-2*t243+0.1120309233738270e-3*t245-0.5731161176002540e-1*t6*t23-0.1519139320949094e-2*t249+0.3398172114871207e-3*t253*t33+0.7476565615762858e-2*t253*t26+0.1953462608228318e-2*t253*t43+0.1942475754413761e-2*t253*t40-0.1911894034835472e-3*t253*t54+0.7126706962557625e-2*t253*t51;
  t273=t251*t74;
  t274=t243+t273;
  t291=-0.1921208562644173e-2*t253*t64+0.1929872411855646e-2*t253*t61+0.5731161176002540e-1*t6*t74+0.3398172114871207e-3*t274*t84+0.7476565615762858e-2*t274*t79+0.1953462608228318e-2*t274*t94+0.1942475754413761e-2*t274*t91-0.1911894034835472e-3*t274*t104+0.7126706962557625e-2*t274*t101-0.1921208562644173e-2*t274*t115+0.1929872411855646e-2*t274*t112;
  t314=-0.7476565615762858e-2*t245*t33-0.1921208562644173e-2*t245*t112-0.1929872411855646e-2*t245*t115-0.5731161176002540e-1*t251*t20+0.1519139320949094e-2*t252+0.3398172114871207e-3*t245*t26+0.1953462608228318e-2*t245*t40-0.1942475754413761e-2*t245*t43-0.1911894034835472e-3*t245*t51-0.7126706962557625e-2*t245*t54-0.1921208562644173e-2*t245*t61;
  t337=-0.1929872411855646e-2*t245*t64-0.5731161176002540e-1*t251*t71+0.1519139320949094e-2*t273+0.1953462608228318e-2*t245*t91-0.1942475754413761e-2*t245*t94-0.1911894034835472e-3*t245*t101-0.7126706962557625e-2*t245*t104+0.3751566060716043e0*t245*t11+0.3751566060716043e0*t251*t17+0.3398172114871207e-3*t245*t79-0.7476565615762858e-2*t245*t84+0.9999999999999999e0*zT;
  pcm[0]=t46+t77+t109+t132;
  pcm[1]=t166+t191+t217+t238;
  pcm[2]=t266+t291+t314+t337;


  p0[0]=xT;
  p0[1]=yT;
  p0[2]=zT;


  t1=sin(qzT);
  t2=sin(qxT);
  t5=cos(qzT);
  t6=sin(qyT);
  t8=cos(qxT);
  t18=cos(qyT);
  p0T[0]=xT+0.5800000000000000e0*t1*t2+0.5800000000000000e0*t5*t6*t8;
  p0T[1]=yT-0.5800000000000000e0*t5*t2+0.5800000000000000e0*t1*t6*t8;
  p0T[2]=zT+0.5800000000000000e0*t18*t8;


  t1=cos(qzT);
  t2=cos(qyT);
  t4=cos(q3R);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t12=cos(qxT);
  t15=sin(q3R);
  pHR[0]=xT+0.1834000000000000e0*t1*t2*t4-0.1834000000000000e0*(t7*t8+t1*t10*t12)*t15;
  pHR[1]=yT+0.1834000000000000e0*t7*t2*t4-0.1834000000000000e0*(-t1*t8+t7*t10*t12)*t15;
  pHR[2]=zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t2*t12*t15;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3R);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3R);
  t21=sin(q1R);
  t27=cos(q1R);
  t31=t7*t2;
  t35=t7*t10;
  t37=-t1*t8+t35*t12;
  t53=t2*t12;
  p1R[0]=xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*(-t7*t12+t11*t8)*t21+0.4000000000000000e0*(t3*t15+t14*t4)*t27;
  p1R[1]=yT+0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.4000000000000000e0*(t1*t12+t35*t8)*t21+0.4000000000000000e0*(t31*t15+t37*t4)*t27;
  p1R[2]=zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.4000000000000000e0*t2*t8*t21+0.4000000000000000e0*(-t10*t15+t53*t4)*t27;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3R);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3R);
  t21=sin(q2R);
  t27=cos(q2R);
  t31=t7*t2;
  t35=t7*t10;
  t37=-t1*t8+t35*t12;
  t53=t2*t12;
  p2R[0]=xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*(-t7*t12+t11*t8)*t21+0.5000000000000000e0*(t3*t15+t14*t4)*t27;
  p2R[1]=yT+0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.5000000000000000e0*(t1*t12+t35*t8)*t21+0.5000000000000000e0*(t31*t15+t37*t4)*t27;
  p2R[2]=zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.5000000000000000e0*t2*t8*t21+0.5000000000000000e0*(-t10*t15+t53*t4)*t27;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3R);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3R);
  t20=-t7*t12+t11*t8;
  t21=sin(q1R);
  t26=t3*t15+t14*t4;
  t27=cos(q1R);
  t30=sin(q2R);
  t33=cos(q2R);
  t37=t7*t2;
  t41=t7*t10;
  t43=-t1*t8+t41*t12;
  t48=t1*t12+t41*t8;
  t53=t37*t15+t43*t4;
  t63=t2*t12;
  t66=t2*t8;
  t71=-t10*t15+t63*t4;
  p3R[0]=xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*t20*t21+0.4000000000000000e0*t26*t27-0.5000000000000000e0*t30*t20+0.5000000000000000e0*t26*t33;
  p3R[1]=yT+0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.4000000000000000e0*t48*t21+0.4000000000000000e0*t53*t27-0.5000000000000000e0*t48*t30+0.5000000000000000e0*t53*t33;
  p3R[2]=zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.4000000000000000e0*t66*t21+0.4000000000000000e0*t71*t27-0.5000000000000000e0*t66*t30+0.5000000000000000e0*t71*t33;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3R);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3R);
  t20=-t7*t12+t11*t8;
  t21=sin(q2R);
  t26=t3*t15+t14*t4;
  t27=cos(q2R);
  t30=sin(q1R);
  t32=cos(q1R);
  t37=t7*t2;
  t41=t7*t10;
  t43=-t1*t8+t41*t12;
  t48=t1*t12+t41*t8;
  t53=t37*t15+t43*t4;
  t63=t2*t12;
  t66=t2*t8;
  t71=-t10*t15+t63*t4;
  p4R[0]=xT+0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*t20*t21+0.5000000000000000e0*t26*t27+(-t30*t20+t32*t26)*leg_length;
  p4R[1]=yT+0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.5000000000000000e0*t48*t21+0.5000000000000000e0*t53*t27+(-t48*t30+t53*t32)*leg_length;
  p4R[2]=zT-0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.5000000000000000e0*t66*t21+0.5000000000000000e0*t71*t27+(-t66*t30+t71*t32)*leg_length;


  t1=cos(qzT);
  t2=cos(qyT);
  t4=cos(q3L);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t12=cos(qxT);
  t15=sin(q3L);
  pHL[0]=xT-0.1834000000000000e0*t1*t2*t4-0.1834000000000000e0*(t7*t8+t1*t10*t12)*t15;
  pHL[1]=yT-0.1834000000000000e0*t7*t2*t4-0.1834000000000000e0*(-t1*t8+t7*t10*t12)*t15;
  pHL[2]=zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t2*t12*t15;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3L);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3L);
  t21=sin(q1L);
  t27=cos(q1L);
  t31=t7*t2;
  t35=t7*t10;
  t37=-t1*t8+t35*t12;
  t53=t2*t12;
  p1L[0]=xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*(-t7*t12+t11*t8)*t21+0.4000000000000000e0*(-t3*t15+t14*t4)*t27;
  p1L[1]=yT-0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.4000000000000000e0*(t1*t12+t35*t8)*t21+0.4000000000000000e0*(-t31*t15+t37*t4)*t27;
  p1L[2]=zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.4000000000000000e0*t2*t8*t21+0.4000000000000000e0*(t10*t15+t53*t4)*t27;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3L);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3L);
  t21=sin(q2L);
  t27=cos(q2L);
  t31=t7*t2;
  t35=t7*t10;
  t37=-t1*t8+t35*t12;
  t53=t2*t12;
  p2L[0]=xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*(-t7*t12+t11*t8)*t21+0.5000000000000000e0*(-t3*t15+t14*t4)*t27;
  p2L[1]=yT-0.1834000000000000e0*t31*t4-0.1834000000000000e0*t37*t15-0.5000000000000000e0*(t1*t12+t35*t8)*t21+0.5000000000000000e0*(-t31*t15+t37*t4)*t27;
  p2L[2]=zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t53*t15-0.5000000000000000e0*t2*t8*t21+0.5000000000000000e0*(t10*t15+t53*t4)*t27;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3L);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3L);
  t20=-t7*t12+t11*t8;
  t21=sin(q1L);
  t26=-t3*t15+t14*t4;
  t27=cos(q1L);
  t30=sin(q2L);
  t33=cos(q2L);
  t37=t7*t2;
  t41=t7*t10;
  t43=-t1*t8+t41*t12;
  t48=t1*t12+t41*t8;
  t53=-t37*t15+t43*t4;
  t63=t2*t12;
  t66=t2*t8;
  t71=t10*t15+t63*t4;
  p3L[0]=xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.4000000000000000e0*t20*t21+0.4000000000000000e0*t26*t27-0.5000000000000000e0*t30*t20+0.5000000000000000e0*t26*t33;
  p3L[1]=yT-0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.4000000000000000e0*t48*t21+0.4000000000000000e0*t53*t27-0.5000000000000000e0*t48*t30+0.5000000000000000e0*t53*t33;
  p3L[2]=zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.4000000000000000e0*t66*t21+0.4000000000000000e0*t71*t27-0.5000000000000000e0*t66*t30+0.5000000000000000e0*t71*t33;


  t1=cos(qzT);
  t2=cos(qyT);
  t3=t1*t2;
  t4=cos(q3L);
  t7=sin(qzT);
  t8=sin(qxT);
  t10=sin(qyT);
  t11=t1*t10;
  t12=cos(qxT);
  t14=t7*t8+t11*t12;
  t15=sin(q3L);
  t20=-t7*t12+t11*t8;
  t21=sin(q2L);
  t26=-t3*t15+t14*t4;
  t27=cos(q2L);
  t30=sin(q1L);
  t32=cos(q1L);
  t37=t7*t2;
  t41=t7*t10;
  t43=-t1*t8+t41*t12;
  t48=t1*t12+t41*t8;
  t53=-t37*t15+t43*t4;
  t63=t2*t12;
  t66=t2*t8;
  t71=t10*t15+t63*t4;
  p4L[0]=xT-0.1834000000000000e0*t3*t4-0.1834000000000000e0*t14*t15-0.5000000000000000e0*t20*t21+0.5000000000000000e0*t26*t27+(-t30*t20+t32*t26)*leg_length;
  p4L[1]=yT-0.1834000000000000e0*t37*t4-0.1834000000000000e0*t43*t15-0.5000000000000000e0*t48*t21+0.5000000000000000e0*t53*t27+(-t48*t30+t53*t32)*leg_length;
  p4L[2]=zT+0.1834000000000000e0*t10*t4-0.1834000000000000e0*t63*t15-0.5000000000000000e0*t66*t21+0.5000000000000000e0*t71*t27+(-t66*t30+t71*t32)*leg_length;


  return;
}

